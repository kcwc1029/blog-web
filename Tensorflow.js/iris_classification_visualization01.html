<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>iris_classification_visualization01</title>
		<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest"></script>
		<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-vis@latest"></script>
	</head>
	<body>
		<script>
			let data_path = "https://fchart.github.io/test/iris.json";
			// TODO: 取得資料
			async function getData() {
				const irisDataReq = await fetch(data_path);
				const irisData = await irisDataReq.json();
				const filterData = irisData
					.map((flower) => ({
						sLength: flower.sepalLength,
						sWidth: flower.sepalWidth,
						pLength: flower.petalLength,
						pWidth: flower.petalWidth,
					}))
					.filter((flower) => flower.sLength != null && flower.sWidth != null && flower.pLength != null && flower.pWidth != null);
				return filterData;
			}

			// TODO: 資料視覺化
			async function visualization() {
				const data = await getData();
				const sepals = data.map((d) => ({ x: d.sLength, y: d.sWidth }));
				const petals = data.map((d) => ({ x: d.pLength, y: d.pWidth }));
				tfvis.render.scatterplot(
					{ name: "萼片/花瓣長度 vs 萼片/花瓣寬度" },
					{ values: [sepals, petals], series: ["花萼", "花瓣"] },
					{ xLabel: "萼片/花瓣長度", yLabel: "萼片/花瓣寬度", height: 300 }
				);
			}
			visualization();
		</script>
	</body>
</html>
