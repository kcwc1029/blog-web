<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
		<title>mobilenet01</title>
		<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest"></script>
		<script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/mobilenet"></script>
	</head>
	<body>
		<div>
			<label for="src" class="label">圖片網址:</label>
			<input type="text" id="src" size="" value="" />
			<input type="button" value="顯示" onclick="loadImg();" />
			<input type="button" value="預測" onclick="predict();" />
		</div>
		<br />
		<p>請先填寫圖片網址，按下【顯示】，確保圖片成功載入後再按下【預測】</p>
		<p>圖片來源不要使用pinterest(可以直接從Eage，Chrom找)</p>
		<img id="img" src="./images/koala.png" height="300" crossorigin />
		<p id="result"></p>
	</body>
	<script>
		async function predict() {
			let img = document.getElementById("img");
			const result = await mobilenet_model.classify(img);
			p = document.getElementById("result");
			p.innerHTML = result[0].className;
			console.table(result);
		}

		function loadImg() {
			p.innerHTML = "等待圖片載入...";
			let img = document.getElementById("img");
			img.src = document.getElementById("src").value;
			p.innerHTML = "按[預測]鈕預測圖片...";
		}

		async function app() {
			mobilenet_model = await mobilenet.load();
			predict();
		}
		app();
	</script>
</html>
